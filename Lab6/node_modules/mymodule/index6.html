<!DOCTYPE html>
<html lang="ua">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
    <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
    <link rel="stylesheet" href="styles.css">


    <script src="https://cdn.jsdelivr.net/npm/chart.js@latest/dist/Chart.min.js"></script>
    <script src="https://code.jquery.com/jquery-latest.min.js"></script>
    <script src="https://cdn.jsdelivr.net/lodash/4.10.0/lodash.js"></script>
    <title>Lab6</title>
</head>

<body>

    <header>
        <h1>Teachinder</h1>
        <form>
            <input id="MySearchText" type="text" placeholder="Name, note or age to search...">
            <a class="button" id="MySearch">
                Відбір
            </a>
        </form>
    </header>
    <nav>
        <div>
            <a href="#teachers">Teachers</a>
            <a href="#statistics">Statistics</a>
            <a href="#favourites">Favourites</a>
            <a href="#about">About</a>
        </div>
        <a class="button" href="#add-teacher-popup">
            Add teacher
        </a>
    </nav>
    <main>
        <article id="teachers">
            <h1>Top Teachers</h1>
            <div id="filter-block">
                <div class="filter-unit">
                    <label>Age</label>
                    <select name="age" id="age">
                        <option value="all">All</option>
                        <option value="young">18-31</option>
                        <option value="adult">32-58</option>
                        <option value="aged">59-75</option>
                    </select>
                </div>
                <div class="filter-unit">
                    <label>Region</label>
                    <select name="region" id="region">
                        <option value="al">Усі</option>
                        <option value="ua">Україна</option>
                        <option value="ge">Germany</option>
                        <option value="uk">Norway</option>
                    </select>
                </div>
                <div class="filter-unit">
                    <label>Sex</label>
                    <select name="sex" id="sex">
                        <option value="all">All</option>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                    </select>
                </div>
                <div class="filter-unit">
                    <input type="checkbox" id="photo" name="photo">
                    <label>Only with photo</label>
                </div>
                <div class="filter-unit">
                    <input type="checkbox" id="favourite" name="favourite">
                    <label>Only favourite</label>
                </div>

                <div class="filter-unit">

                    <a class="button" id="submitButton1">
                        Відбір
                    </a>

                </div>

                <div class="add-unit">

                    <a class="button" id="submitButtonAdd">
                        Render
                    </a>

                </div>


            </div>

            <div id="gallery">

            </div>
        </article>
        <article id="statistics">
            <h1>Statistics</h1>
            <table id="grid">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Speciality</th>
                        <th>Age</th>
                        <th>Sex</th>
                        <th>Nationality</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
            <div id="poechart">

                <input id="poeSubmit" type="submit" value="Обновити">

            </div>


        </article>
        <article id="slider">

        </article>
        <article id="about">
            <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur in turpis tempus, hendrerit justo ac,
                viverra sapien. Etiam fermentum nisl et dolor sagittis, ac interdum lorem dapibus. Sed lectus ex,
                vestibulum non rutrum ut, blandit eu urna. Donec ut imperdiet risus, eu sodales libero. Curabitur
                tristique pretium dui quis euismod. Pellentesque sodales dignissim gravida. Donec condimentum eros non
                dignissim elementum. Donec at tempor dolor. Maecenas aliquet, mauris et molestie dignissim, dolor nisl
                porta odio, id semper diam turpis ut ipsum. Nam porta, quam et finibus blandit, lectus mi consequat
                augue, a malesuada massa orci quis sem. Aliquam sed consequat urna.
            </p>
            <p>
                Fusce interdum velit nec tellus semper dapibus. Proin varius quam fermentum dui vehicula ultrices.
                Integer ipsum metus, sollicitudin sit amet tellus sit amet, dictum commodo nisl. Donec id posuere urna.
                Fusce dignissim aliquet lectus, tincidunt rhoncus urna aliquet at. Pellentesque porta tortor neque, non
                faucibus neque semper sit amet. Etiam laoreet purus eget nulla commodo vehicula.
            </p>
        </article>
    </main>
    <footer>
        <nav>
            <div>
                <a href="#teachers">Teachers</a>
                <a href="#statistics">Statistics</a>
                <a href="#favourites">Favourites</a>
                <a href="#about">About</a>
            </div>
            <a class="button" href="#add-teacher-popup">
                Add teacher
            </a>
        </nav>
    </footer>

    <div id="add-teacher-popup" class="modal">
        <div class="content">
            <header>
                <h2>Add teacher</h2>
                <a href="#" class="box-close">x</a>
            </header>
            <form id="my-form-add">
                <section>
                    <label>Full name</label>
                    <input type="text" name="full-name-in" required>
                </section>

                <section>
                    <label>Specialization</label>
                    <select name="specialization" id="spec">
                        <option value="math">Math</option>
                        <option value="biology">Biology</option>
                        <option value="physics">Physics</option>
                    </select>
                </section>

                <div id="contact">
                    <section>
                        <label>e-mail</label>
                        <input type="email" name="email-in" required>
                    </section>

                    <section>
                        <label>Telephone</label>
                        <input type="tel" name="phone-in" pattern="[+]380\d{9}$" required>
                    </section>
                </div>

                <div id="location">
                    <section>
                        <label>Country</label>
                        <select name="region" id="region">
                            <option value="ua">Україна</option>
                            <option value="cz">Česká Republika</option>
                            <option value="uk">United Kingdom</option>
                        </select>
                    </section>

                    <section>
                        <label>City</label>
                        <input type="text" name="city-in" required>
                    </section>
                </div>

                <section>
                    <label>Sex</label>
                    <div>
                        <input type="radio" name="sex-in" value="Male" required>
                        <label>Male</label>
                        <input type="radio" name="sex-in" value="Female">
                        <label>Female</label>
                    </div>
                </section>

                <section>
                    <label>Date of birth</label>
                    <input type="date" name="date-of-birth-in" required>
                </section>

                <section>
                    <label>Background color</label>
                    <input type="color" name="color-in">
                </section>

                <section>
                    <label>Comment</label>
                    <textarea rows="4" name="comment-in" cols="50"></textarea>
                </section>

                <input id="submit-add-form" type="submit">
            </form>

        </div>
    </div>

    <div id="compact-card-popup" class="modal">


        <div class="content">
            <header>
                <h2>Compact card</h2>
                <a href="#" class="box-close">x</a>
            </header>
            <form>
                <figure>
                    <img src="assets/no_avatar_template.png" />
                    <figcaption>
                        <output name="full-name-out">ПІБ</output>
                    </figcaption>
                </figure>
                <a class="button" href="#full-card-popup">
                    Open full card
                </a>
            </form>
        </div>
    </div>

    <div id="full-card-popup" class="modal">
        <div class="content">
            <header>
                <h2>Full card</h2>
                <a href="#" class="box-close">x</a>
            </header>
            <form>
                <section>
                    <label>Full name</label>
                    <output name="Борис Бритва"></output>
                </section>

                <section>
                    <label>Sex</label>
                    <output name="Чоловіча"></output>
                </section>

                <section>
                    <label>Date of birth</label>
                    <output name="24.09.2002"></output>
                </section>

                <div id="contact">
                    <section>
                        <label>e-mail</label>
                        <output name="taras24@gmail.com"></output>
                    </section>

                    <section>
                        <label>Telephone</label>
                        <output name="7653"></output>
                    </section>
                </div>

                <div id="location">
                    <section>
                        <label>Country</label>
                        <output name="Украіна"></output>
                    </section>

                    <section>
                        <label>City</label>
                        <output name="Киів"></output>
                    </section>
                </div>

                <section>
                    <label>Comment</label>
                    <output name="Чудова людина"></output>
                </section>

                <section>
                    <label>Location</label>
                    <iframe
                        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d325518.68783443136!2d30.252510061496128!3d50.401699044222795!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x40d4cf4ee15a4505%3A0x764931d2170146fe!2z0JrQuNC10LIsINCj0LrRgNCw0LjQvdCwLCAwMjAwMA!5e0!3m2!1sru!2snl!4v1679307881581!5m2!1sru!2snl"
                        width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy"
                        referrerpolicy="no-referrer-when-downgrade"></iframe>
                </section>
            </form>
        </div>




    </div>

    <script type="module">
        import { start, next, task4, task5, add, onbuttonadd, piechat } from './6.js';


        async function create() {

            await start();
        }

        function update() {

            next();
        }



        window.addEventListener('load', async () => {

            await create();

            showAlert4();
        });


        var bttn2 = document.getElementById("submitButton1");


        function showAlert2() {

            update();

            showAlert4();
        }



        bttn2.onclick = showAlert2;

        async function showAlertAdd() {

            await onbuttonadd();
            next();
            showAlert4();
        }

        var bttnAdd = document.getElementById("submitButtonAdd");




        bttnAdd.onclick = showAlertAdd;

        let loginForm = document.getElementById("my-form-add");

        loginForm.addEventListener("submit", (e) => {


            e.preventDefault();
            let formData = new FormData(loginForm);
            let name = formData.get('full-name-in'); // 'John'
            let specialization = formData.get('specialization'); // 'Smith'
            let email = formData.get('email-in');
            let tel = formData.get('phone-in');
            let region = formData.get('region');
            let city = formData.get('city-in');
            let sex = formData.get('sex-in');
            let date = formData.get('date-of-birth-in');
            let color = formData.get('color-in');
            let comment = formData.get('comment-in');


            add(name, specialization, email, tel, region, city, sex, date, color, comment);

            loginForm.reset();

        });




        let table1 = document.getElementById('grid');


        function showAlert1() {
            let td = event.target.closest('th');

            task4(td.cellIndex);
            update();
            showAlert4();
        }

        table1.onclick = showAlert1;


        var bttn3 = document.getElementById("MySearch");


        function showAlert3() {
            var zn = document.getElementById("MySearchText").value;
            task5(zn);

        }

        bttn3.onclick = showAlert3;



        var bttn4 = document.getElementById("poeSubmit");


        function showAlert4() {
            $.get('6.js', function (html) {
                $('#poechart').html((new DOMParser()).parseFromString(html, 'text/html').querySelector('#poechart').innerHTML);
            });
            piechat();

        }

        bttn4.onclick = showAlert4;
    </script>


</body>

</html>